# =============================================================================
# Storage Config Secret for KServe
# =============================================================================
# This secret is required by KServe's storage-initializer to download models.
# It contains S3 credentials in JSON format, keyed by Data Connection name.
#
# When InferenceService uses storage.key: minio-connection, KServe looks for
# this secret with a key named 'minio-connection' containing JSON credentials.
# =============================================================================
apiVersion: v1
kind: Secret
metadata:
  name: storage-config
  namespace: private-ai
  labels:
    opendatahub.io/managed: "true"
  annotations:
    argocd.argoproj.io/sync-wave: "5"
    openshift.io/description: "KServe storage configuration for model downloads"
type: Opaque
stringData:
  # Key must match the 'storage.key' value in InferenceService
  minio-connection: |
    {
      "type": "s3",
      "access_key_id": "rhoai-access-key",
      "secret_access_key": "rhoai-secret-key-12345",
      "endpoint_url": "http://minio.minio-storage.svc:9000",
      "bucket": "rhoai-storage",
      "region": "us-east-1"
    }

