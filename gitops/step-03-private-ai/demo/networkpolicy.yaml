# Network Policy to allow OpenShift Router access to workbenches
# The RHOAI-generated network policies only allow access from redhat-ods-applications
# This policy allows the ingress controller to reach the workbenches via routes
apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-router-to-workbenches
  namespace: private-ai
  labels:
    app: gpu-demo
spec:
  podSelector:
    matchLabels:
      opendatahub.io/workbenches: "true"
  ingress:
    - from:
        # Allow from OpenShift ingress controller (router)
        - namespaceSelector:
            matchLabels:
              network.openshift.io/policy-group: ingress
      ports:
        - protocol: TCP
          port: 8888
  policyTypes:
    - Ingress

