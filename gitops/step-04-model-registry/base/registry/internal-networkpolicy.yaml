apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: private-ai-registry-internal-access
  namespace: rhoai-model-registries
  annotations:
    argocd.argoproj.io/sync-wave: "6"
    description: |
      Allows internal pods (like the seed job) to access the Model Registry
      REST API on port 8080. This bypasses the OAuth proxy for automation.
spec:
  podSelector:
    matchLabels:
      app: private-ai-registry
      component: model-registry
  policyTypes:
    - Ingress
  ingress:
    # Allow access from pods in the same namespace (seed job, automation)
    - from:
        - podSelector: {}
      ports:
        - protocol: TCP
          port: 8080

