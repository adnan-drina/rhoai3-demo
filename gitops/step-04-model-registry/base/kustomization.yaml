apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Step 04: Enterprise Model Governance
# Implements the "Gatekeeper" pattern for AI model management
#
# All components in rhoai-model-registries namespace:
#   ┌─────────────────────────────────────────────────────────────────────────┐
#   │                    rhoai-model-registries namespace                     │
#   ├─────────────────────────────────────────────────────────────────────────┤
#   │                                                                         │
#   │   ┌─────────────────┐     ┌─────────────────┐                          │
#   │   │   MariaDB       │◀────│  ModelRegistry  │                          │
#   │   │   (metadata)    │     │  (API server)   │                          │
#   │   └─────────────────┘     └─────────────────┘                          │
#   │                                                                         │
#   └─────────────────────────────────────────────────────────────────────────┘
#
# Model Registration: Done via RHOAI Dashboard (Settings → Model registries)
# This is the recommended governance workflow for ai-admin.
#
# Ref: https://docs.redhat.com/en/documentation/red_hat_openshift_ai_self-managed/3.0/html-single/managing_model_registries/index

resources:
  # ═══════════════════════════════════════════════════════════════════════════
  # 1. Metadata Database (sync-wave: 1-2)
  # ═══════════════════════════════════════════════════════════════════════════
  - database/
  
  # ═══════════════════════════════════════════════════════════════════════════
  # 2. Model Registry Instance (sync-wave: 5)
  # ═══════════════════════════════════════════════════════════════════════════
  - registry/
  
  # ═══════════════════════════════════════════════════════════════════════════
  # 3. Governance RBAC (sync-wave: 10)
  # ═══════════════════════════════════════════════════════════════════════════
  - rbac/

# ═══════════════════════════════════════════════════════════════════════════════
# Notes
# ═══════════════════════════════════════════════════════════════════════════════
#
# Model Registration is done via:
# 1. RHOAI Dashboard: Settings → Model registries → Register model
# 2. Or using the Model Registry Python SDK in a notebook
#
# This aligns with the enterprise governance workflow:
# - ai-admin registers validated models through the Dashboard
# - ai-developer discovers models in GenAI Studio → AI Available Assets
