apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# RHOAI 3.0 Platform Layer
# Ref: https://docs.redhat.com/en/documentation/red_hat_openshift_ai_self-managed/3.0/html-single/installing_and_uninstalling_openshift_ai_self-managed/index
#
# Key 3.0 Changes:
#   - datasciencepipelines → aipipelines
#   - User/Admin groups moved from OdhDashboardConfig → Auth resource
#   - New: Hardware Profiles (replaces Accelerator Profiles)
#   - New: GenAI Studio, llamastackoperator, distributedinference

resources:
  # 1. Operator Installation (sync-wave: 0-2)
  - rhoai-operator/namespace.yaml
  - rhoai-operator/operatorgroup.yaml
  - rhoai-operator/subscription.yaml
  
  # 2. DSCInitialization - Global operator config (sync-wave: 5)
  # Must be created before DataScienceCluster
  - rhoai-operator/dsci.yaml
  
  # 3. DataScienceCluster - Core RHOAI components (sync-wave: 10)
  - rhoai-operator/datasciencecluster.yaml
  
  # 3b. Kueue Component - Dashboard integration (sync-wave: 11)
  # Required for Dashboard to recognize standalone Kueue operator
  - rhoai-operator/kueue-component.yaml
  
  # 4. Auth - User/Admin group management (sync-wave: 12)
  # New in 3.0: Replaces group config in OdhDashboardConfig
  - rhoai-operator/auth.yaml
  
  # 5. Dashboard Config - Feature toggles (sync-wave: 15)
  # Enables: GenAI Studio, Model Registry, etc.
  - rhoai-operator/dashboard-config.yaml
  
  # 6. Hardware Profiles - GPU profiles for GenAI Studio (sync-wave: 16)
  # CPU Small: For development without GPU
  - rhoai-operator/hardware-profile-cpu-small.yaml
  # Default: g6.4xlarge (16 vCPU, 64GB, 1x L4) - overrides operator default
  - rhoai-operator/hardware-profile-default.yaml
  # L4 1GPU: g6.4xlarge (16 vCPU, 64GB, 1x L4)
  - rhoai-operator/hardware-profile-l4-1gpu.yaml
  # L4 4GPUs: g6.12xlarge (48 vCPU, 192GB, 4x L4)
  - rhoai-operator/hardware-profile-l4-4gpu.yaml
