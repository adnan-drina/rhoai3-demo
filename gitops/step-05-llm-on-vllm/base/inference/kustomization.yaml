apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# =============================================================================
# GPU-as-a-Service Demo: "Resource Handover" Configuration
# =============================================================================
#
# This configuration demonstrates RHOAI 3.0's dynamic GPU allocation via Kueue.
#
# BASELINE STATE (Full Quota Saturation):
#   - mistral-3-bf16 (4 GPUs) + mistral-3-int4 (1 GPU) = 5/5 GPUs
#   - devstral-2 is at minReplicas: 0 (waiting to be activated)
#
# DEMO FLOW:
#   1. Start: All 5 GPUs are consumed by the two Mistral models
#   2. Action: Use GPU Switchboard to enable Devstral-2
#   3. Observe: Kueue holds Devstral-2 in PENDING (4+1+4 > 5)
#   4. Resolution: Disable mistral-3-bf16 via Switchboard
#   5. Climax: Devstral-2 INSTANTLY starts as 4 GPUs become available
#
# Storage Strategy:
#   - BF16 models (>20GB): S3/MinIO storage
#   - INT4 models (<20GB): OCI ModelCar from registry.redhat.io
#
# =============================================================================

resources:
  # Primary Load: 4-GPU BF16 (minReplicas: 1)
  - mistral-3-bf16.yaml
  
  # Secondary Load: 1-GPU INT4 (minReplicas: 1)
  - mistral-3-int4.yaml
  
  # Queued Asset: 4-GPU Agentic (minReplicas: 0)
  - devstral-2.yaml
