---
description: Use when working with secrets, deploy scripts, .env, or TLS/self-signed clusters. Follow project's demo secrets approach.
globs: **/deploy.sh,**/.env,**/.env.*,**/env.example,**/*secret*.yaml,**/*secrets*.yaml
alwaysApply: false
---

# Secrets & Certificates (Demo Rules)

## Secrets handling (no secret manager)
- Secrets are created by:
  1) executing `oc` commands from README instructions, OR
  2) running `deploy.sh` which reads secret data from `.env`.

## Demo secrets in GitOps
- Some demo secrets with placeholder/demo values are committed to GitOps for convenience.
- These MUST include a comment header indicating they are demo values:
  ```yaml
  # ⚠️ DEMO VALUES ONLY - Replace for production use
  # Generate new values: <command to generate>
  ```
- Demo secrets in this repo:
  - `gitops/step-03-private-ai/base/auth/htpasswd-secret.yaml`
  - `gitops/step-03-private-ai/base/minio/credentials-secret.yaml`
  - `gitops/step-04-model-registry/base/database/credentials-secret.yaml`

## Never commit real secrets
- Do not commit production secret values.
- For real deployments, replace demo secrets via:
  - External Secrets Operator
  - Sealed Secrets
  - `oc create secret` commands documented in README

## Self-signed certificates
- It is acceptable to bypass TLS verification:
  - `oc --insecure-skip-tls-verify=true ...`
  - `curl -k ...`
- Document where/why TLS is bypassed in README so users aren't surprised.

## Environment file
- Template: `env.example` (no leading dot for visibility)
- User copy: `.env` (gitignored)
- Load pattern: `deploy.sh` sources `.env` via `lib.sh:load_env()`
